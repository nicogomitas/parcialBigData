{"filter":false,"title":"setup_event.py","tooltip":"/Parcial/setup_event.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":38,"column":0},"action":"insert","lines":["import boto3","","s3_client = boto3.client('s3')","lambda_client = boto3.client('lambda')","","bucket_name = \"parcial3-lambda1\"","lambda_function_arn = \"<ARN_DE_LAMBDA_PROCESS_DATA>\"  # Sustituye con el ARN de la segunda Lambda","","# Configurar el evento","response = s3_client.put_bucket_notification_configuration(","    Bucket=bucket_name,","    NotificationConfiguration={","        'LambdaFunctionConfigurations': [","            {","                'LambdaFunctionArn': lambda_function_arn,","                'Events': ['s3:ObjectCreated:*'],","                'Filter': {","                    'Key': {","                        'FilterRules': [","                            {'Name': 'prefix', 'Value': 'headlines/raw/'},  # Filtra archivos en la carpeta `raw`","                        ]","                    }","                }","            }","        ]","    }",")","","# Dar permisos a Lambda para que S3 pueda invocarla","lambda_client.add_permission(","    FunctionName=\"<NOMBRE_DE_LAMBDA_PROCESS_DATA>\",","    StatementId=\"S3InvokePermission\",","    Action=\"lambda:InvokeFunction\",","    Principal=\"s3.amazonaws.com\",","    SourceArn=f\"arn:aws:s3:::{bucket_name}\"",")","","print(\"Evento configurado correctamente\")",""],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":38,"column":0},"end":{"row":38,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1732202596707,"hash":"ea64546b2dab2a08dd621cc302d6e6f3b030e20d"}